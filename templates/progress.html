{% extends "base.html" %}

{% block title %}Research Progress{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/progress.css') }}">
{% endblock %}

{% block content %}
<section class="research-form">
  <h2>Research in Progress</h2>
  <p>Your research on "{{ topic }}" is being processed.</p>
  
  <div class="progress-container" data-job-id="{{ job_id }}">
    <div class="status-indicator">
      <span>Status: {{ status_message }}</span>
    </div>
    
    <div class="progress-bar">
      <div class="progress-fill" style="width: {{ progress }}%;"></div>
    </div>
    
    <div class="progress-status">
      <span>{{ progress }}% Complete</span>
      <span>Est. completion: {{ remaining }}</span>
    </div>
    
    <div class="status-indicator {% if phase == 'planning' %}active{% endif %}">
      <span>Planning</span>
    </div>
    
    <div class="status-indicator {% if phase == 'searching' %}active{% endif %}">
      <span>Searching</span>
    </div>
    
    <div class="status-indicator {% if phase == 'analyzing' %}active{% endif %}">
      <span>Analyzing</span>
    </div>
    
    <div class="status-indicator {% if phase == 'synthesizing' %}active{% endif %}">
      <span>Synthesizing</span>
    </div>
    
    <div class="status-indicator {% if phase == 'report_generation' %}active{% endif %}">
      <span>Report Generation</span>
    </div>
  </div>
  
  <div class="research-parameters">
    <h3>Research Parameters</h3>
    <ul>
      <li><strong>Audience:</strong> {{ parameters.audience|title }}</li>
      <li><strong>Depth:</strong> {{ parameters.depth|title }}</li>
      <li><strong>Format:</strong> {{ parameters.format|title }}</li>
      <li><strong>Time Constraint:</strong> {{ parameters.time_constraint }} minutes</li>
    </ul>
  </div>
  
  {% if is_completed %}
  <div class="completion-message">
    <h3>Research Complete!</h3>
    <p>Your research has been successfully completed.</p>
    <div class="action-buttons">
      <a href="{{ url_for('view_results', job_id=job_id) }}" class="button">View Results</a>
      <a href="{{ url_for('index') }}" class="button secondary">Back to Home</a>
    </div>
  </div>
  {% endif %}
</section>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/progress.js') }}"></script>
{% endblock %}
